# office client
#
# Install a full office client with centos 7.
install
text
cmdline
lang de_CH.UTF-8
keyboard us
timezone Europe/Zurich --isUtc
auth --useshadow --enablemd5
selinux --disabled
firewall --disabled
services --enabled=NetworkManager,sshd --disabled=postfix
eula --agreed
ignoredisk --only-use=sda

# Installation source?

bootloader --location=mbr
zerombr
clearpart --all --initlabel

# TBD: Partitions (root, swap..), File System (XFS / EXT4)
part swap --asprimary --fstype="swap" --size=1024
part /boot --fstype xfs --size=200
part pv.01 --size=1 --grow
volgroup rootvg01 pv.01
logvol / --fstype xfs --name=lv01 --vgname=rootvg01 --size=1 --grow

rootpw toor

# define default repository
repo --name=base --baseurl=http://linuxsoft.cern.ch/centos/7/os/x86_64/
url --url="http://linuxsoft.cern.ch/centos/7/os/x86_64/"

%packages 
@core
%end

%post
/usr/bin/yum update -y --skip-broken
/usr/bin/yum -y install ntp

# epel-release
/usr/bin/yum -y install epel-release

# install cinnamon DE
/usr/bin/yum install --enablerepo=epel -y cinnamon*
/usr/bin/echo "exec /usr/bin/cinnamon-session" >> ~/.xinitrc

# install Virtualbox
/usr/bin/yum install kernel-devel kernel-headers dkms
/usr/bin/yum groupinstall "Development Tools"
/usr/bin/yum update -y
/usr/bin/wget http://download.virtualbox.org/virtualbox/debian/oracle_vbox.asc
/usr/bin/rpm --import oracle_vbox.asc
/usr/bin/wget http://download.virtualbox.org/virtualbox/rpm/el/virtualbox.repo -O /etc/yum.repos.d/virtualbox.repo
/usr/bin/yum install VirtualBox-4.1

# install Skype
/usr/bin/yum install qtwebkit.i686
/usr/bin/yum install alsa-lib.i686 libXv.i686 libXScrnSaver.i686 gtk2-engines.i686 PackageKit-gtk-module.i686 libcanberra.i686 libcanberra-gtk2.i686
/usr/bin/yum install pulseaudio-libs.i686 alsa-plugins-pulseaudio.i686
/usr/bin/yum install libv4l.i686
/usr/bin/yum install libXss.so.1
# TODO: Download-Ordner Ã¤ndern?
/usr/bin/cd /home/root/Downloads
/usr/bin/wget http://download.skype.com/linux/skype-4.3.0.37.tar.bz2
/usr/bin/tar -jxvf skype-4.3.0.37.tar.bz2
/usr/bin/touch /usr/bin/skype
/usr/bin/chmod 755 /usr/bin/skype
/usr/bin/echo -e "#!/bin/sh \n export SKYPE_HOME=\"/opt/skype-4.3.0.37\" \n $SKYPE_HOME/skype --resources=$SKYPE_HOME $*" >> /usr/bin/skype
/usr/bin/ln -s /usr/src/skype-4.3.0.37/icons/SkypeBlue_48x48.png /usr/share/icons/skype.png
/usr/bin/ln -s /usr/src/skype-4.3.0.37/icons/SkypeBlue_48x48.png /usr/share/pixmaps/skype.png
/usr/bin/ln -s /usr/src/skype-4.3.0.37/skype.desktop /usr/share/applications/skype.desktop
/usr/bin/ln -s /opt/skype-4.3.0.37/sounds/ /usr/share/sounds/
/usr/bin/ln -s /opt/skype-4.3.0.37/lang/ /usr/share/lang/
# TODO: Create Desktop / Menu shortcut

/usr/bin/yum -y clean all
/usr/bin/systemctl enable ntpd.service
%end
